# OpenStack Service : Cinder

상태: Done
태그: Block Storage

---

# Cinder란

> Cinder는 Nova에서 생성한 인스턴스의 볼륨(저장 공간)을 관리하는 볼륨 스토리지 입니다.
> 

# Block Storage

# Cinder Logical Architecture

![스크린샷 2023-05-10 오전 11.09.17.png](OpenStack%20Service%20Cinder%209ca7aae5a0294f34ad016521ff0a5ac3/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.09.17.png)

## Cinder를 사용하여 볼륨을 할당하는 방법

1. **볼륨 생성** :  `Cinder-API`를 사용하여 볼륨을 생성합니다. 생성 중에는 볼륨의 크기, 볼륨 유형, 볼륨 이름등을 지정할 수 있습니다.
    - `Cinder-volume` 은 볼륨을 실제로 생성하고 데이터베이스에 볼륨정보를 업데이트합니다.
    - Cinder는 하드 디스크를 `LVM(Logical Volmun Manager)`로 설정합니다.
    - 설정한 LVM은 `cinder.conf`와 `nova.conf`의 환경설정을 통하여 신더 볼륨을 할당합니다.
2. **볼륨 연결** :  볼륨이 생성되면 볼륨을 연결할 노드에 Cinder 볼륨 드라이버를 설치하여 연결합니다.
    - `Cinder-API`를 통해서 생성된 볼륨은 단일 인스턴스 또는 여러 인스턴스에 할당할 수 있습니다.
3. **볼륨 마운트** : Cinder 볼륨 드라이버가 설치된 노드에서 연결된 볼륨을 인식하고 마운트합니다.
4. **볼륨 분리** : 작업이 끝나면, 인스턴스와 볼륨의 연결을 분리합니다. Cinder눈 분리된 볼륨을 다시 사용 가능한 상태로 반환합니다.

## LVM (Logical Volumn Manager)

LVM은 Logical Volumn Manager의 약자로 “**하드 디스크를 파티션으로 나누는 것이 아닌 논리 볼륨**”으로 할당 하고, 다시 여러 개의 디스크를 좀 더 효율적이고 유연하게 관리할 수 있는 방식을 뜻합니다.

![스크린샷 2023-05-10 오전 11.37.07.png](OpenStack%20Service%20Cinder%209ca7aae5a0294f34ad016521ff0a5ac3/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.37.07.png)

- 물리 저장소 (HDD, SDD 등)를 볼륨 그룹 으로, 볼륨 그룹을 논리 볼륨으로 나누는 개념에 대한 그림입니다.
- 논리 볼륨에는 마운트 지점(mount point)과 파일 시스템 유형이 부여됩니다.
    - Cinder는 볼륨을 인스턴스와 연결하고 마운트
- 파티션의 용량이 가득 차게 되면, 논리 볼륨 그룹으로 부터 여유 공간을 가져와 파티션의 용량을 확장시킵니다.
- 새로운 디스크를 OS에 추가시키면 논리 볼륨 그룹 → 논리 그룹으로 추가 됩니다.