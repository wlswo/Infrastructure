# OpenStack Service : Swift

상태: Done
태그: Object Storage

---

# What is Swift

> Swift는 클라우드 스토리지를 제공하는 오브젝트 스토리지입니다. 

간단한 API로 많은 데이터들을 저장, 검색할 수 있으며 **비정형 데이터를 저장하기 위해 적합**합니다.
데이터를 파일과 메타데이터로 저장하며 파일을 복제하는 분산관리 방식을 사용합니다.
> 

# Swift 작동 방식

Swift는 데이터를 서버 운영 체제의 기본 파일 시스템에 이진 객체로 저장합니다. 각 개체는 파

![스크린샷 2023-05-10 오전 9.57.53.png](OpenStack%20Service%20Swift%20d3791f6d346440e1859506a4c795c20b/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_9.57.53.png)

- Swfit는 프록시 서버와, 어카운트, 컨테이너, 오브젝트로 구성됩니다.
- 프록시 서버는 어카운트, 컨테이너, 오브젝트를 관리합니다.
- 프록시서버는 클라이언트가 스토리지 서버로 읽기 및 쓰기 요청을 전송할 수 있도록 REST API를 제공합니다.

# Swfit 구성요소

## 스토리지 관리

- Swift-proxy : Storage 노드를 관리, 사용자 인증을 처리
    - REST API를 이용하여 Object를 관리하기 위해서는 사용자 인증을 받아야합니다. 오픈스택의 Keystone Auth를 사용하여 받은 Token을 이용해 오브젝트 스토리지의 데이터를 관리합니다.
- memcached : 메모리 캐시를 이용하기 위해 세션을 저장
- Object API : Object를 관리하기 위한 REST API를 제공

## 데이터 저장

- account / DB : Object Storage 정의 계정 관리
- container / DB : Container 폴더 매핑 및 관리
- object / store : Object 파일을 다운/업로드 관리

# Swift 클러스터 구성도

![스크린샷 2023-05-10 오전 10.34.11.png](OpenStack%20Service%20Swift%20d3791f6d346440e1859506a4c795c20b/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_10.34.11.png)

- 사용자의 요청은 로드밸런서를 통해 프록시 서버로 전달됩니다.
    - 이때 프록시 서버를 여러대 두어 요청을 분산시킬수 있습니다.
- 받은 요청이 Account, Container, Object 중 어떤 요청인지 확인합니다.
    - Ring은 요청한 데이터의 위치 주소값을 얻어와 처리합니다.

*프록시 서버의 증설은 요청 처리 용량의 증설을 의미하며, Zone 증설은 스토리이 용량의 증설을 의미합니다.

*The Ring 

- Ring 의 구조

![스크린샷 2023-05-10 오전 10.46.11.png](OpenStack%20Service%20Swift%20d3791f6d346440e1859506a4c795c20b/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_10.46.11.png)

- 링은 클러스터 구조에서 **데이터가 저장될 위치를 결정**합니다.
- **ID** : 디바이스를 구분하기 위한 번호
- **Zone Number** : 해당하는 Zone  Number
- **IP** : 해당하는 Storage Node의 IP 주소
- **Port** : 해당하는 Storage Node의 Port 주소
    - (Account-Server : 6002, Container-Server : 6001, Object-Server : 6000)
- **Device Name** : 해당하는 Storage Node의 접근한 폴더 이름
- **Weight** : 디바이스의 비중
- **Meta** : 디바이스에 추가적으로 입력할 내용