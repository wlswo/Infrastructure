# OpenStack Service : Nova

상태: Done
태그: compute

---

# NOVA

> Nova는 컴퓨팅 인스턴스 즉 가상 서버를 프로비저닝 하는 방법을 제공하는 OpenStack 프로젝트이다. Nova는 가상 머신, 베어메탈 서버 생성을 지원하고 시스템 컨테이너에 대한 지원이 제한적이다. Nova는 해당 서비스를 제공하기 위해 기존 리눅스 서버위에서 일련의 데몬으로 실행된다.
> 

→ 노바는 가상 머신의 생성과 수정, 삭제 등 라이프사이클 전체를 관리하는 기능을 제공한다고 보면 되겠습니다. 노바는 일반적으로 다른 서비스들과 함께 사용합니다. 

**Depend On**

- KeyStone : 모든 OpenStack 서비스에 대한 인증을 제공
- Glance : 컴퓨트 이미지 저장소를 제공 → 모든 컴퓨트 인스터스는 구글 이미지 시작
- Neutron : 컴퓨팅 인스턴스가 부팅 시 연결되는 가상 또는 물리적 네트워크를 프로비저닝하는 역할을 합니다.
- Batch : 클라우드에서 암호화된 디스크 및 베어메탈 컴퓨팅 인스턴스를 다른 서비스와 통합 가능
- 영구 블록 스토리지, 암호화된 디스크 및 베어메탈 컴퓨팅 인스턴스를 포함하는 다른 서비스와 통합할 수 있다.

## Nova 사용을 위한 도구

- Horizen : Opentack 클라이언트 :    프로젝트 공식 UI
- OpensStack CRL :  OpenStack 프로젝트의 공식 CLI 이다. 대부분의 경우 이를 CLI로 사용해야 하며, 여기에는 nova 명령어뿐만 아니라 OpenStack의 대부분의 프로젝트에 대한 명령도 포함됩니다
- Nova Cliemt : nova의 고급 기능을 사용하려면 nova 클라이언트를 사용해야 할 수 있습니다. 여전히 지원되지만 openStackCLI가 권장합니다.

# 고려사항

Nova 컴퓨트 서비스를 구축하기 위해서 고려해야할 몇 가지 사항

- CPU
    - 컴퓨트 서비스가 동작할 호스트 시스템의 CPU가 기본적으로 자체 하드웨어 가상화를 지원해야 합니다.
- 하이퍼바이저
    - 오픈스택에서 기본적으로 사용하는 하이퍼바이저는 KVM/QEMU 입니다.
- 저장공간
    - 생성할 인스턴스의 용량을 고려하여 디스크 공간을 확보해야 합니다.
- 오버커밋
    - 인스턴스에 할당하는 CPU 및 메모리의 경우, 물리 CPU 코어나 메모리가 1:1로 할당되는 것이 아니라 기존 물리 성능 대비 축소하여 할당하게 됩니다. 인스턴스의 성능을 좌우하는 핵심 부분이기 때문에 주요 고려 사항으로 봐야합니다.
    - CPU: 16:1, Memory 1.5:1
        - 인스턴스 생성시 CPU 코어를 1개 할당하는 경우 기존 물리 코어 대비 1/16 대비 하락된 CPU 성능을 보일수 있습니다.
        - 메모리또한 마찬가지 입니다.
- 네트워크
    - 인스턴스의 네트워킹 기능의 경우, 보통 Nova와 Neutron 네트워크 서비스가 연계하여 기능을 제공합니다.

# Nova 컴포넌트 구조

![스크린샷 2023-05-04 오후 3.48.34.png](OpenStack%20Service%20Nova%203d8e6c4d065a427fb5320f923949aaf0/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-04_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.48.34.png)

- **nova-api**
    - 최종 사용자의 API 콜을 통해 서비스간 질의 응답을 담당합니다.
    - **다른 OpenStack의 다른 서비스 API와 통신**하며, AWS EC2와 같은 서비스와도 연계가 가능합니다.
- **nova-compute**
    - 가상화 API를 이용하여 가상 **머신 인스턴스를 생성하고 종료하는 역할을 담당**합니다.
    - 아래와 같은 서비스들을 사용하여 명령을 수행합니다.
        - XenServer/XCP에서의 XenAPI
        - KVM or QEMU에서의 libvirt
        - VMware에서의 VMwareAPI
- **nova-scheduler**
    - **컴퓨트 호스트가 다수인 경우**, 큐를 통해 받은 메시지를 어떤 호스트에서 컴퓨트 명령을 수행할 것인지를 담당합니다.
- **nova-conductor**
    - nova-compute 서비스와 **데이터베이스 간 상호작용을 담당**합니다.
- **nova-cert**
    - X509 인증서에 대한 Nova Cert 서비스를 제공하는 서버 데몬입니다.
- **nova-consoleauth**
    - 콘솔 프록시를 제공하는 사용자에 대한 **인증 토큰을 제공**합니다.
- **Guest Agent**
    - **실제 컴퓨트 시스템 상에 구축된 VM**(인스턴스)입니다. Nova Compute → Hypervisor에 의해 제어됩니다.